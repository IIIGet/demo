<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="Generator" content="EditPlus®">
    <meta name="Author" content="">
    <meta name="Keywords" content="">
    <meta name="Description" content="">
    <title>商品</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    <link th:href="@{/css/detail.css}" rel="stylesheet" type="text/css">
    <script type="text/javascript" th:src="@{/js/detail.js}"></script>
</head>
<body>
<div class="wrapper">
    <div class="top">
        <ul class="tf">
            <li><a href="main.html">小食の店首页</a></li>
            <li><a href="#">hi,尊敬的顾客
                <td th:text="${userName}">Ings</td>
            </a></li>
            <li><a href="#">退出</a></li>
        </ul>
        <ul class="tr">
            <li><a href="#">购物车</a></li>
            <li><a href="#">收藏夹</a></li>
            <li><a href="#">会员服务</a></li>
            <li><a href="#">商家支持</a></li>
        </ul>
    </div>

    <div class="content">
        <div class="logo">
            <img src="kele.jpg" width="396px" height="400px">
        </div>
        <div class="descr">
            <tr th:each="goods : ${GoodsDetail}">
                <h3>
                    <td th:text="${goods.gName}">2020欧洲杯意大利主场球衣</td>
                </h3>
                <div class="price">
                    <P>销售价: ￥
                    <td th:text="${goods.gPrice}">699</td>
                    </P>
                    <P>会员价: ￥
                    <td th:utext="${goods.gPriceVip}"> 419</td>
                    </P>
                </div>
                <div class="number_info">
                    <dt>请选择想要购买的数量</dt>
                    <form action="pNumber" method="post">
                        <dd>
                            <input type="button" class="decrease" value="-">
                            <input type="text" name="buyNumber" value="1" class="quantity"/>
                            <input type="button" class="increase" value="+">
                            <button>
                                <a>确定</a>
                            </button>
                        </dd>
                    </form>
                </div>
                <div class="addPurchase">
                    <button type="button" class="add">
                        <td>
                            <a th:href="@{insertS(userId=1,gId=${goods.gId})}">加入购物车</a>
                        </td>
                    </button>
                    <button type="button" class="buy">
                        <a href="order">立即购买</a>
                    </button>
                </div>
        </div>
    </div>
</div>
</tr>
<script>
    var elee = document.getElementsByTagName("button")[0];
    elee.onclick = function () {
        swal({
            title: "已确定",
            type: "success",
            confirmButtonText: "确定",
            closeOnConfirm: false
        });
    }
    var ele = document.getElementsByTagName("button")[1];
    ele.onclick = function () {
        swal({
            title: "添加成功",
            type: "success",
            confirmButtonText: "确定",
            closeOnConfirm: false
        });
    }

    var increment = document.getElementsByClassName("increase");

    var decrement = document.getElementsByClassName("decrease");

    for (var i = 0; i < increment.length; i++) {
        //为a标签添加index属性，用于记录下标
        increment[i].index = i;

        //点击+数量增加的功能函数
        increment[i].onclick = function () {
            var flag = this.index;

            //获取当前按钮对应的数量框
            var q = document.getElementsByClassName("quantity")[flag];

            var newvalue = parseInt(q.value) + 1;

            q.setAttribute('value', newvalue);

            //更新此商品对应的‘小计’
            changeSum(flag, newvalue);
        }
    }

    for (var i = 0; i < decrement.length; i++) {
        //为a标签添加index属性，用于记录下标
        decrement[i].index = i;

        //点击-数量减少的功能函数
        decrement[i].onclick = function () {
            var flag = this.index;

            //获取当前按钮对应的数量框
            var q = document.getElementsByClassName("quantity")[flag];

            var newvalue = parseInt(q.value) - 1;

            q.setAttribute('value', newvalue);

            //更新此商品对应的‘小计’
            changeSum(flag, newvalue);
        }
    }
    // //更新每个商品的‘小计’
    // function changeSum(flag, num) {
    //     //获取对应商品单价所在的标签
    //     var temp = document.getElementsByClassName("onlyPrice")[flag];
    //
    //     //获取商品单价
    //     var unitPrice = temp.innerHTML;
    //
    //     //计算新的小计价格
    //     var newPrice = (parseFloat(unitPrice) * (num*1.0)).toFixed(1);
    //     //获取当前“小计”的标签
    //     var sum = document.getElementsByClassName("onlySum")[flag];
    //
    //     sum.innerHTML = newPrice;
    // }
</script>
</body>
</html>
